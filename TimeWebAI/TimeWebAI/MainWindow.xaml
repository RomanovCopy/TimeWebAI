<Window x:Class="TimeWebAI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:interfaces="clr-namespace:TimeWebAI.Interfaces"
        xmlns:viewmodels="clr-namespace:TimeWebAI.ViewModels"
        xmlns:markup="clr-namespace:TimeWebAI.Markup" 
        xmlns:controls="clr-namespace:TimeWebAI.AppControls"
        xmlns:local="clr-namespace:TimeWebAI"
        mc:Ignorable="d"
        d:DataContext="{x:Type interfaces:IMainWindowViewModel}"
        Title="Timeweb AI" MinHeight="600" MinWidth="400">

    <Window.DataContext>
        <markup:ResolveViewModel ViewModelType="{x:Type interfaces:IMainWindowViewModel}"/>
    </Window.DataContext>
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0"/>
    </WindowChrome.WindowChrome>
    <Window.Width>
        <Binding Path="WindowWidth"  Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"/>
    </Window.Width>
    <Window.Height>
        <Binding Path="WindowHeight"  Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"/>
    </Window.Height>
    <Window.Top>
        <Binding Path="WindowTop"  Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"/>
    </Window.Top>
    <Window.Left >
        <Binding Path="WindowLeft"  Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"/>
    </Window.Left>
    <Window.WindowState>
        <Binding Path="WindowState" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"/>
    </Window.WindowState>

    <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition x:Name="forTitleBar" Height="Auto"/>
            <RowDefinition x:Name="forMyFrame" Height="*"/>
            <RowDefinition x:Name="forStatusBar" Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <ContentControl Content="{markup:ResolveUserControl UserControlType={x:Type controls:TitleBarControl}}"/>
        </Grid>
        <Grid Grid.Row="1" >
            <ContentControl Content="{markup:ResolveUserControl UserControlType={x:Type controls:FrameControl}}" />
        </Grid>
    </Grid>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{ Binding Loaded, UpdateSourceTrigger=PropertyChanged}"/>
        </i:EventTrigger>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{ Binding Closing, UpdateSourceTrigger=PropertyChanged}"/>
        </i:EventTrigger>
        <i:EventTrigger EventName="Closed">
            <i:InvokeCommandAction Command="{ Binding Closed, UpdateSourceTrigger=PropertyChanged}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Window>
